<html>
    <head>
        <title>Documentation</title>

        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" lang="en" content="Documentation of many things I learned">
        <meta name="keywords" content="HTML, CSS, JavaScript, Coding, max">
        <meta name="author" content="Rohrhirsch Max">
                
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

        <link rel="stylesheet" href="/documentation/docStyle.css">
        <link rel="icon" type="image/x-icon" href="/Bilder/favicon.ico">
    </head>
    <body>
        <!-- ------ TOP NAVIGATION BAR ----- -->
        <nav class="nav1">
            <div class="dropdown" style="float:left;">
                <button class="dropbtn">Languages</button>
                <div class="dropdown-content" style="left:0;">
                    <a href="/documentation/languages/sql/sql.html">SQL</a>
                    <a href="/documentation/languages/python/python.html">Python</a>
                    <a href="/documentation/languages/java/java.html">Java</a>
                    <a href="/documentation/languages/js/js.html">JS</a>
                    <a href="/documentation/languages/css/css.html">CSS</a>
                    <a href="/documentation/languages/c/c.html">C</a>
                    <a href="/documentation/languages/cpp/cpp.html">C++</a>
                </div>
            </div>
            <div class="dropdown" style="float:left;">
                <button class="dropbtn">Small Language</button>
                <div class="dropdown-content" style="left:0;">
                    <a href="/documentation/small/bash/bash.html">Bash</a>
                    <a href="/documentation/small/rust/rust.html">Rust</a>
                    <a href="/documentation/small/go/go.html">GO</a>
                    <a href="/documentation/small/csharp/csharp.html">C#</a>
                </div>
            </div>
            <div class="dropdown" style="float:left;">
                <button class="dropbtn">libaries</button>
                <div class="dropdown-content" style="left:0;">
                    <a href="/documentation/libaries/socket/socket.html">Socket</a>
                    <a href="/documentation/libaries/tenserflow/tenserflow.html">Tenserflow</a>
                    <a href="/documentation/libaries/regex/regex.html">Regex</a>
                    <a href="/documentation/libaries/numpy/numpy.html">Numpy</a>
                </div>
            </div>
            <div class="dropdown" style="float:left;">
                <button class="dropbtn">Special</button>
                <div class="dropdown-content" style="left:0;">
                    <a href="/documentation/special/computer/computer.html">Computer</a>
                    <a href="/documentation/special/logik/logik.html">Logikgates</a>
                    <a href="/documentation/special/linux/linux.html">Linux</a>
                    <a href="/documentation/special/arduino/arduino.html">Arduino</a>
                    <a href="/documentation/special/game/game.html">Game Maker</a>
                    <a href="/documentation/special/unity/unity.html">Unity</a>
                    <a href="/documentation/special/os/os.html">OS</a>
                    <a href="/documentation/special/hacking/hacking.html">Hacking</a>
                </div>
            </div>
            <div class="dropdown" style="float:left;">
                <button class="dropbtn">Extensions/API</button>
                <div class="dropdown-content" style="left:0;">
                    <a href="/documentation/extension/chrome/chrome.html">Chrome Extension</a>
                    <a href="/documentation/extension/discord/discord.html">Discord Bot</a>
                    <a href="/documentation/extension/computercraft/computercraft.html">Computercraft</a>
                </div>
            </div>
            <div class="dropdown" style="float:left;">
                <button class="dropbtn">SCHOOL</button>
                <div class="dropdown-content" style="left:0;">
                    <a href="/documentation/school/math/math.html">Math</a>
                    <a href="/documentation/school/physik/physik.html">Physik</a>
                    <a href="/documentation/school/bwl/bwl.html">BWL</a>
                    <a href="/documentation/school/it/it.html">IT</a>
                </div>
            </div>
        </nav>

        <!-- ------ SIDE NAVIGATION BAR ----- -->
        <div class="sidenav">
            <a href="/documentation/languages/chrome/chrome.html">Basics</a>
            <a href="/documentation/languages/chrome/know.html">good to know</a>
        </div>

        <!-- ------ MAIN CONTENT ----- -->
        <div class="main">
            <h1>Chrome extension</h1>
            <hr>

            <p>
                You need 4 files:
                - manifest.json (most important)
                - index.html (the GUI to interact with extension)
                - script.js (script in the Extension pop up for comunication)
                - injected.js (edditing the webpage)
            </p>

            <h2>manifest.json</h2>
            <pre>
                <code class="language-json">
{
"name": "Colored Calender",
"version": "1.2",
"description": "Colores the background of specific days in your google calender.",
"manifest_version": 3,
"permissions": ["scripting", "activeTab","tabs", "storage"],
"action": {
    "default_popup": "index.html",
    "default_title": "myExtension"
},
"host_permission": ["https://calendar.google.com/*"],
"content_scripts": [
    {
        "matches": ["https://calendar.google.com/*"],
        "js": ["inject.js"]
    }
]
,"content_security_policy": {
    "extension_pages": "script-src 'self'; object-src 'self';",
    "sandbox": "sandbox allow-scripts allow-forms allow-popups allow-modals; script-src 'self' 'unsafe-inline' 'unsafe-eval'; child-src 'self';"
}
}
                </code>
            </pre>

            <h2>index.html</h2>
            <pre>
                <code class="language-html">
&lt;meta http-equiv="Content-Security-Policy" content="default-src *; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline' 'unsafe-eval'"> &lt;!-- Very important --&gt;
&lt;script type="text/javascript" src="script.js"></script>
        
&lt;div id="add">
    &lt;form id="form">
        Von: &lt;input type="date" id="inp1"> &lt;br>
        Bis: &lt;input type="date" id="inp2"> &lt;br>
        Color: &lt;input type="text" maxlength="3"  id="inp3"> &lt;br>
        &lt;button  id="submit">+&lt;/button>
    &lt;/form>
&lt;/div>
                </code>
            </pre>

            <h2>index.html</h2>
            <pre>
                <code class="language-html">
&lt;meta http-equiv="Content-Security-Policy" content="default-src *; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline' 'unsafe-eval'"> &lt;!-- Very important --&gt;
&lt;script type="text/javascript" src="script.js"></script>
        
&lt;div id="add">
    &lt;form id="form">
        Von: &lt;input type="date" id="inp1"> &lt;br>
        Bis: &lt;input type="date" id="inp2"> &lt;br>
        Color: &lt;input type="text" maxlength="3"  id="inp3"> &lt;br>
        &lt;button  id="submit">+&lt;/button>
    &lt;/form>
&lt;/div>
                </code>
            </pre>

            <h2>script.js</h2>
            <pre>
                <code class="language-js">
document.onreadystatechange = () => { // only when loaded. Otherwise you get an error, when you try to interact with elements, that dont exist
    if (document.readyState === 'complete') {
    
        //Add a Date
        document.getElementById("submit").addEventListener("click", (e) => {
            chrome.storage.sync.get(["inputs"], (result) => {       // async syncronise cookies
                chrome.storage.sync.set({"inputs": 
                result["inputs"].concat([[
                    document.getElementById("inp1").value, 
                    document.getElementById("inp2").value, 
                    document.getElementById("inp3").value
                ]])})
            })
        })
    }
}
                </code>
            </pre>

            <h2>inject.js</h2>
            <pre>
                <code class="language-js">
document.onreadystatechange = () => {
    if (document.readyState === 'complete') {

        // Store data in sync storage
        chrome.storage.sync.set({"inputs": [['2023-07-27', '2023-08-31', 'cfc'], ['2023-09-5', '2023-09-30', 'cfc'], ['2023-10-01', '2024-01-07', 'fcc']]});




        // read all Dates on change cookies
        chrome.storage.onChanged.addListener((changes, area) => {
            if (area == "sync") {
                ...
            }
        })
    }
};
                </code>
            </pre>




            <a class="pre">Previous</a>
            <a class="next">Next</a>
        </div>
        <div id="modal01" class="modal" onclick="this.style.display='none'">
            <span class="close">X</span>
            <div class="modal-content">
              <img id="img01" style="max-width:100%">
            </div>
          </div>


        <!-- ------ SCRIPT FOR DROPDOWN ----- -->
        <script>
            var dropdown = document.getElementsByClassName("dropdown-btn");
            var i;
            
            for (i = 0; i < dropdown.length; i++) {
              dropdown[i].addEventListener("click", function() {
                this.classList.toggle("active");
                var dropdownContent = this.nextElementSibling;
                if (dropdownContent.style.display === "block") {
                  dropdownContent.style.display = "none";
                } else {
                  dropdownContent.style.display = "block";
                }
              });
            }
        </script>
        <script>
            function onClick(element) {
                document.getElementById("img01").src = element.src;
                document.getElementById("modal01").style.display = "block";
            }
        </script>
    </body>
</html>